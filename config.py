# =============================================================
# config.py — كل إعدادات النظام في مكان واحد
# عدّل هذا الملف فقط عند تغيير أي إعداد
# =============================================================

import os
from dotenv import load_dotenv

load_dotenv()  # يقرأ من ملف .env تلقائياً

# ─────────────────────────────────────────
# 1. إعدادات Alpaca
# ─────────────────────────────────────────
ALPACA_API_KEY    = os.getenv("ALPACA_API_KEY", "")
ALPACA_SECRET_KEY = os.getenv("ALPACA_SECRET_KEY", "")
ALPACA_BASE_URL   = "https://paper-api.alpaca.markets"  # Paper Trading
ALPACA_DATA_URL   = "https://data.alpaca.markets"

# ─────────────────────────────────────────
# 2. إعدادات Telegram
# ─────────────────────────────────────────
TELEGRAM_TOKEN   = os.getenv("TELEGRAM_TOKEN", "")
TELEGRAM_CHAT_ID = os.getenv("TELEGRAM_CHAT_ID", "")

# ─────────────────────────────────────────
# 3. إدارة المخاطرة
# ─────────────────────────────────────────
RISK_PER_TRADE      = 0.03   # 3% من الرصيد الحالي لكل صفقة
MAX_DAILY_LOSSES    = 2      # إيقاف النظام بعد خسارتين في اليوم
STRATEGY2_LEVERAGE  = 2.0   # رافعة مالية للاستراتيجية الثانية فقط

# ─────────────────────────────────────────
# 4. اختيار الأسهم
# ─────────────────────────────────────────
UNIVERSE_SIZE       = 20     # عدد الأسهم التي يفحصها النظام يومياً
MIN_AVG_VOLUME      = 1_000_000   # أقل حجم تداول يومي مقبول
MIN_PRICE           = 10.0        # أقل سعر للسهم مقبول
BENCHMARK_TICKER    = "QQQ"       # المؤشر المرجعي للمقارنة

# ─────────────────────────────────────────
# 5. الاستراتيجية الأولى — المحافظة
# ─────────────────────────────────────────
S1_EMA_FAST         = 50          # EMA سريع
S1_EMA_SLOW         = 200         # EMA بطيء
S1_BREAKOUT_PERIOD  = 50          # كسر أعلى كم شمعة
S1_CONFIRM_CANDLES  = 2           # عدد الشموع للتأكيد
S1_STOP_LOOKBACK    = 5           # أدنى Low لآخر كم شمعة
S1_TARGET_R         = 2.0         # هدف ثابت R2
S1_TRAIL_TRIGGER_R  = 1.0         # عند R1 → نقل الوقف
S1_TRAIL_TO_R       = 0.5         # ينقل الوقف إلى R0.5

# ─────────────────────────────────────────
# 6. الاستراتيجية الثانية — Mean Reversion
# ─────────────────────────────────────────
S2_RSI_PERIOD       = 14          # فترة RSI
S2_RSI_OVERSOLD     = 30          # RSI تحت هذا → إشارة شراء محتملة
S2_VWAP_DEVIATION   = 0.0         # السعر تحت VWAP = شرط الشراء

# ─────────────────────────────────────────
# 7. توقيت السوق (بتوقيت نيويورك)
# ─────────────────────────────────────────
MARKET_OPEN         = "09:30"     # افتتاح السوق
MARKET_CLOSE        = "16:00"     # إغلاق السوق
PRE_MARKET_ALERT    = 30          # تنبيه قبل الافتتاح بـ 30 دقيقة
NO_OPPORTUNITY_INTERVAL = 60      # تنبيه "لا توجد فرصة" كل 60 دقيقة
TIMEZONE            = "America/New_York"

# ─────────────────────────────────────────
# 8. إعدادات البيانات
# ─────────────────────────────────────────
CANDLE_INTERVAL     = "5Min"      # الفريم الزمني الرئيسي
HISTORY_BARS        = 250         # عدد الشموع التاريخية للتحليل
RS_LOOKBACK         = 100         # فترة حساب القوة النسبية (شمعة)
